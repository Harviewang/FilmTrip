# FilmTrip å¼€å‘è§„èŒƒ

## ğŸ¤– å›¢é˜Ÿåä½œè§„åˆ™

### Agentè§’è‰²å®šä¹‰

#### @architect - ç³»ç»Ÿæ¶æ„å¸ˆ
- **èŒè´£**: æ•´ä½“æ¶æ„è®¾è®¡ã€æŠ€æœ¯é€‰å‹ã€ä»£ç å®¡æŸ¥ã€æ€§èƒ½ä¼˜åŒ–
- **ä¸“é•¿**: ç³»ç»Ÿè®¾è®¡ã€æ¶æ„æ¨¡å¼ã€è®¾è®¡åŸåˆ™ã€æŠ€æœ¯é€‰å‹
- **å·¥ä½œæ–¹å¼**: æä¾›æ¶æ„å»ºè®®ã€ä»£ç å®¡æŸ¥ã€æ€§èƒ½ä¼˜åŒ–å»ºè®®

#### @backend - åç«¯å¼€å‘å·¥ç¨‹å¸ˆ  
- **èŒè´£**: APIå¼€å‘ã€æ•°æ®åº“è®¾è®¡ã€ä¸šåŠ¡é€»è¾‘ã€ä¸­é—´ä»¶å¼€å‘
- **ä¸“é•¿**: Node.jsã€Expressã€SQLiteã€REST APIã€è®¤è¯æˆæƒ
- **å·¥ä½œæ–¹å¼**: å®ç°åç«¯åŠŸèƒ½ã€ç¼–å†™APIæ–‡æ¡£ã€å¤„ç†ä¸šåŠ¡é€»è¾‘

#### @frontend - å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ
- **èŒè´£**: UIç»„ä»¶å¼€å‘ã€çŠ¶æ€ç®¡ç†ã€ç”¨æˆ·ä½“éªŒã€å“åº”å¼è®¾è®¡
- **ä¸“é•¿**: Reactã€Tailwind CSSã€çŠ¶æ€ç®¡ç†ã€ç»„ä»¶è®¾è®¡ã€ç”¨æˆ·äº¤äº’
- **å·¥ä½œæ–¹å¼**: åˆ›å»ºReactç»„ä»¶ã€ä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€å®ç°å“åº”å¼å¸ƒå±€

#### @database - æ•°æ®åº“å·¥ç¨‹å¸ˆ
- **èŒè´£**: æ•°æ®å»ºæ¨¡ã€æŸ¥è¯¢ä¼˜åŒ–ã€æ•°æ®è¿ç§»ã€æ€§èƒ½è°ƒä¼˜
- **ä¸“é•¿**: SQLiteã€æ•°æ®å»ºæ¨¡ã€SQLä¼˜åŒ–ã€æ•°æ®å®Œæ•´æ€§ã€ç´¢å¼•è®¾è®¡
- **å·¥ä½œæ–¹å¼**: è®¾è®¡æ•°æ®åº“ç»“æ„ã€ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ã€ç®¡ç†æ•°æ®è¿ç§»

#### @tester - æµ‹è¯•å·¥ç¨‹å¸ˆ
- **èŒè´£**: å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯•ã€è´¨é‡ä¿è¯
- **ä¸“é•¿**: Jestã€APIæµ‹è¯•ã€å‰ç«¯æµ‹è¯•ã€æµ‹è¯•ç­–ç•¥ã€è‡ªåŠ¨åŒ–æµ‹è¯•
- **å·¥ä½œæ–¹å¼**: ç¼–å†™æµ‹è¯•ç”¨ä¾‹ã€æ‰§è¡Œæµ‹è¯•ã€æŠ¥å‘Šé—®é¢˜ã€è´¨é‡ç›‘æ§

#### @devops - è¿ç»´å·¥ç¨‹å¸ˆ
- **èŒè´£**: éƒ¨ç½²é…ç½®ã€ç¯å¢ƒç®¡ç†ã€ç›‘æ§å‘Šè­¦ã€æ€§èƒ½ä¼˜åŒ–
- **ä¸“é•¿**: éƒ¨ç½²è„šæœ¬ã€ç¯å¢ƒé…ç½®ã€æ—¥å¿—ç›‘æ§ã€æ€§èƒ½åˆ†æ
- **å·¥ä½œæ–¹å¼**: é…ç½®éƒ¨ç½²ç¯å¢ƒã€ç›‘æ§æœåŠ¡çŠ¶æ€ã€ä¼˜åŒ–æ€§èƒ½

#### @reviewer - ä»£ç è¯„å®¡ä¸“å®¶
- **èŒè´£**: ä»£ç è´¨é‡å®¡æŸ¥ã€åŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥ã€è·¨æ¨¡å—ä¸€è‡´æ€§éªŒè¯ã€é—æ¼æ£€æµ‹
- **ä¸“é•¿**: ä»£ç è§„èŒƒã€è®¾è®¡æ¨¡å¼ã€ç”¨æˆ·ä½“éªŒã€æ€§èƒ½ä¼˜åŒ–ã€å®‰å…¨å®¡è®¡
- **å·¥ä½œæ–¹å¼**: äº¤å‰æ£€æŸ¥å„æ¨¡å—å¼€å‘ã€å‘ç°æ½œåœ¨é—®é¢˜ã€æä¾›æ”¹è¿›å»ºè®®ã€ç¡®ä¿è´¨é‡æ ‡å‡†

### åä½œå·¥ä½œæµ

#### 1. åŠŸèƒ½å¼€å‘æµç¨‹
```
ä¸»Agent: æˆ‘ä»¬éœ€è¦å¼€å‘æ–°åŠŸèƒ½X
@architect: è®¾è®¡æ•´ä½“æ¶æ„å’ŒæŠ€æœ¯æ–¹æ¡ˆ
@backend: å®ç°åç«¯APIå’Œä¸šåŠ¡é€»è¾‘
@frontend: å¼€å‘å‰ç«¯ç•Œé¢å’Œäº¤äº’
@database: è®¾è®¡æ•°æ®ç»“æ„å’ŒæŸ¥è¯¢
@tester: ç¼–å†™æµ‹è¯•ç”¨ä¾‹å¹¶éªŒè¯
@devops: é…ç½®éƒ¨ç½²å’Œç›‘æ§
```

#### 2. ä»£ç å®¡æŸ¥æµç¨‹
```
@reviewer: ç»Ÿç­¹ä»£ç è´¨é‡å®¡æŸ¥å’Œå®Œæ•´æ€§æ£€æŸ¥
@architect: å®¡æŸ¥æ¶æ„è®¾è®¡å’Œä»£ç ç»“æ„
@backend: å®¡æŸ¥åç«¯ä»£ç è´¨é‡å’Œæ€§èƒ½
@frontend: å®¡æŸ¥å‰ç«¯ä»£ç å’Œç”¨æˆ·ä½“éªŒ
@database: å®¡æŸ¥æ•°æ®åº“è®¾è®¡å’ŒæŸ¥è¯¢
@tester: å®¡æŸ¥æµ‹è¯•è¦†ç›–ç‡å’Œè´¨é‡
```

#### 3. é—®é¢˜æ’æŸ¥æµç¨‹
```
@tester: å‘ç°å¹¶æŠ¥å‘Šé—®é¢˜
@reviewer: äº¤å‰éªŒè¯é—®é¢˜èŒƒå›´å’Œå½±å“
@architect: åˆ†æé—®é¢˜æ ¹å› å’Œå½±å“èŒƒå›´
@backend/@frontend: å®šä½å’Œä¿®å¤ä»£ç é—®é¢˜
@database: æ£€æŸ¥æ•°æ®ç›¸å…³é—®é¢˜
@devops: æ£€æŸ¥ç¯å¢ƒå’Œéƒ¨ç½²é—®é¢˜
```

### ä½¿ç”¨æŠ€å·§

#### 1. æ˜ç¡®æŒ‡å®šAgent
```
@backend è¯·å¸®æˆ‘ä¼˜åŒ–è¿™ä¸ªAPIçš„æ€§èƒ½
@frontend è¿™ä¸ªç»„ä»¶éœ€è¦æ”¯æŒç§»åŠ¨ç«¯
@database è¿™ä¸ªæŸ¥è¯¢å¤ªæ…¢äº†ï¼Œè¯·ä¼˜åŒ–
```

#### 2. å¤šAgentåä½œ
```
@architect @backend @frontend æˆ‘ä»¬ä¸€èµ·æ¥è®¾è®¡ç”¨æˆ·æƒé™ç³»ç»Ÿ
@database @tester è¯·åä½œå®Œæˆæ•°æ®è¿ç§»çš„æµ‹è¯•
```

---

## ğŸš€ å¼€å‘å¯åŠ¨æµç¨‹

### 1. æœåŠ¡å¯åŠ¨è§„èŒƒ
```bash
# åç«¯å¯åŠ¨ (ç«¯å£3001)
cd backend
npm start

# å‰ç«¯å¯åŠ¨ (ç«¯å£3002) - å¿…é¡»æŒ‡å®šç«¯å£ï¼
cd frontend
npx vite --port 3002 --host  # ä¸è¦ç”¨ npm run dev (é»˜è®¤5173ç«¯å£)
```

### 2. ç«¯å£é…ç½®è§„èŒƒ
- **åç«¯**: 3001ç«¯å£
- **å‰ç«¯**: 3002ç«¯å£ (å¿…é¡»æ˜ç¡®æŒ‡å®š)
- **æ•°æ®åº“**: SQLiteæ–‡ä»¶åœ¨ `data/filmtrip.db`

### 3. å¯åŠ¨éªŒè¯è§„èŒƒ
```bash
# éªŒè¯åç«¯
curl http://localhost:3001/api/photos

# éªŒè¯å‰ç«¯
curl http://localhost:3002
```

## ğŸ” é—®é¢˜æ’æŸ¥è§„èŒƒ

### 1. å‰ç«¯é¡µé¢æ‰“ä¸å¼€
**æ£€æŸ¥é¡ºåº**ï¼š
1. æ£€æŸ¥ç«¯å£å ç”¨: `lsof -i :3002`
2. æ£€æŸ¥è¿›ç¨‹çŠ¶æ€: `ps aux | grep vite`
3. æ£€æŸ¥ç«¯å£é…ç½®: ç¡®ä¿ä½¿ç”¨ `--port 3002`
4. æ£€æŸ¥æœåŠ¡æ—¥å¿—: æŸ¥çœ‹å¯åŠ¨é”™è¯¯

### 2. ç¼©ç•¥å›¾ä¸æ˜¾ç¤º
**æ£€æŸ¥é¡ºåº**ï¼š
1. æ£€æŸ¥åç«¯API: `curl /api/photos`
2. æ£€æŸ¥æ–‡ä»¶è·¯å¾„: `uploads/Film_roll/roll_XXX/thumbnails/`
3. æ£€æŸ¥æ•°æ®åº“: `filename` å­—æ®µæ˜¯å¦åŒ¹é…
4. æ£€æŸ¥å‰ç«¯ä»£ç : å›¾ç‰‡srcè·¯å¾„æ˜¯å¦æ­£ç¡®

### 3. é«˜åº¦è‡ªé€‚åº”é—®é¢˜
**æ£€æŸ¥é¡ºåº**ï¼š
1. æ£€æŸ¥CSSç±»: `h-screen overflow-hidden`
2. æ£€æŸ¥å®¹å™¨: `h-full overflow-y-auto`
3. æ£€æŸ¥Tailwindé…ç½®: è‡ªå®šä¹‰é«˜åº¦ç±»

## ğŸ“ ç›®å½•ç»“æ„è§„èŒƒ

### 1. ä¸Šä¼ æ–‡ä»¶ç»“æ„
```
uploads/
â”œâ”€â”€ Film_roll/
â”‚   â”œâ”€â”€ roll_001/
â”‚   â”‚   â”œâ”€â”€ photos/          # åŸå›¾
â”‚   â”‚   â””â”€â”€ thumbnails/      # ç¼©ç•¥å›¾
â”‚   â””â”€â”€ roll_002/
â”œâ”€â”€ Film_stocks/             # èƒ¶å·ç±»å‹
â””â”€â”€ camera/                  # ç›¸æœºä¿¡æ¯
```

### 2. æ–‡ä»¶å‘½åè§„èŒƒ
- **ç…§ç‰‡**: `photo_XXX.jpg` (XXXä¸ºåºå·)
- **èƒ¶å·**: `roll_XXX` (XXXä¸ºèƒ¶å·ID)
- **ç¼©ç•¥å›¾**: ä¸åŸå›¾åŒåï¼Œæ”¾åœ¨thumbnailsç›®å½•

## ğŸ› ï¸ å¼€å‘å·¥å…·è§„èŒƒ

### 1. è„šæœ¬ä½¿ç”¨
```bash
# å¯åŠ¨è„šæœ¬
./start-smart.sh          # æ™ºèƒ½å¯åŠ¨
./start-dev-tabs.sh       # å¤šæ ‡ç­¾å¯åŠ¨
./stop-services.sh        # åœæ­¢æœåŠ¡

# æ•°æ®åº“è„šæœ¬
backend/scripts/          # æ•°æ®åˆ›å»ºå’Œä¿®å¤è„šæœ¬
```

### 2. è°ƒè¯•å·¥å…·
```bash
# æ£€æŸ¥ç¼©ç•¥å›¾
node backend/scripts/check-thumbnails.js

# ç”Ÿæˆç¼©ç•¥å›¾
node backend/scripts/ensure-thumbnails.js

# ä¿®å¤æ–‡ä»¶å
node backend/scripts/fix-photo-filenames.js
```

## ğŸ”§ ä»£ç è§„èŒƒ

### 1. å‰ç«¯ç»„ä»¶
- ä½¿ç”¨ `AdaptiveLayout`, `AdaptiveGrid`, `AdaptiveCard` ç»„ä»¶
- å›¾ç‰‡è·¯å¾„: `http://localhost:3001${photo.thumbnail}`
- é«˜åº¦è‡ªé€‚åº”: `h-screen overflow-hidden` + `h-full overflow-y-auto`

### 2. åç«¯API
- ç…§ç‰‡API: `/api/photos` è¿”å› `{data: [...]}`
- èƒ¶å·API: `/api/filmRolls` è¿”å› `{data: [...]}`
- èƒ¶å·ç±»å‹API: `/api/filmStocks` è¿”å› `{data: [...]}`

### 3. æ•°æ®åº“æ“ä½œ
- ä½¿ç”¨ `models/db.js` ä¸­çš„ `query`, `insert`, `update`, `deleteRecord`
- å¤–é”®çº¦æŸ: åˆ é™¤å‰å…ˆåˆ é™¤å¼•ç”¨æ•°æ®

## ğŸ“‹ å¼€å‘æ£€æŸ¥æ¸…å•

### å¯åŠ¨å‰æ£€æŸ¥
- [ ] ç¡®è®¤ç«¯å£3001å’Œ3002æœªè¢«å ç”¨
- [ ] ç¡®è®¤æ•°æ®åº“æ–‡ä»¶å­˜åœ¨
- [ ] ç¡®è®¤uploadsç›®å½•ç»“æ„æ­£ç¡®

### å¼€å‘ä¸­æ£€æŸ¥
- [ ] å‰ç«¯é¡µé¢èƒ½æ­£å¸¸è®¿é—®
- [ ] åç«¯APIèƒ½æ­£å¸¸å“åº”
- [ ] ç¼©ç•¥å›¾èƒ½æ­£å¸¸æ˜¾ç¤º
- [ ] é«˜åº¦è‡ªé€‚åº”æ­£å¸¸å·¥ä½œ

### æäº¤å‰æ£€æŸ¥
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ— æ§åˆ¶å°é”™è¯¯
- [ ] å“åº”å¼è®¾è®¡æ­£å¸¸
- [ ] æ€§èƒ½ç¬¦åˆè¦æ±‚

## ğŸš¨ å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

### 1. "npm run dev" ç«¯å£é”™è¯¯
**é”™è¯¯**: å‰ç«¯å¯åŠ¨åœ¨5173ç«¯å£è€Œä¸æ˜¯3002
**è§£å†³**: ä½¿ç”¨ `npx vite --port 3002 --host`

### 2. "photos.map is not a function"
**é”™è¯¯**: APIè¿”å›æ ¼å¼ä¸æ­£ç¡®
**è§£å†³**: æ£€æŸ¥APIè¿”å›ç»“æ„ï¼Œç¡®ä¿æ˜¯æ•°ç»„

### 3. "Cannot read properties of null"
**é”™è¯¯**: DOMå…ƒç´ ä¸å­˜åœ¨
**è§£å†³**: æ·»åŠ nullæ£€æŸ¥ `e.target.nextSibling?.style`

### 4. ç¼©ç•¥å›¾404
**é”™è¯¯**: æ–‡ä»¶è·¯å¾„ä¸åŒ¹é…
**è§£å†³**: è¿è¡Œ `fix-photo-filenames.js` è„šæœ¬

## ğŸ“š ç›¸å…³æ–‡æ¡£
- `docs/å‰ç«¯è®¾è®¡è§„èŒƒ.md` - å‰ç«¯è®¾è®¡æ ‡å‡†
- `docs/æ•°æ®åº“è®¾è®¡.md` - æ•°æ®åº“ç»“æ„
- `docs/é—®é¢˜è¿½è¸ª.md` - å·²çŸ¥é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

---

**é‡è¦æé†’**: æ¯æ¬¡å¼€å‘å‰å¿…é¡»é˜…è¯»æ­¤è§„èŒƒï¼Œé¿å…é‡å¤é—®é¢˜ï¼

## ğŸš¨ ç”¨æˆ·æ ¸å¿ƒè§„åˆ™ (å¿…é¡»éµå®ˆ)

### 1. ä¼šè¯ä¸é˜»æ–­è§„åˆ™
- **ç¦æ­¢**: æ‰§è¡Œå‘½ä»¤æ—¶é˜»æ–­ç”¨æˆ·ä¼šè¯
- **è¦æ±‚**: æ‰€æœ‰å‘½ä»¤å¿…é¡»ä½¿ç”¨ `&` æˆ– `nohup` åœ¨åå°è¿è¡Œ
- **åŸåˆ™**: ç”¨æˆ·æ°¸è¿œä¸åº”è¯¥ç­‰å¾…å‘½ä»¤æ‰§è¡Œå®Œæˆ

### 2. å…¨å±è‡ªé€‚åº”è§„åˆ™
- **ç¦æ­¢**: å‡ºç°å…¨å±€æ»šåŠ¨æ¡
- **è¦æ±‚**: æ‰€æœ‰é¡µé¢å¿…é¡»ä½¿ç”¨ `h-screen overflow-hidden` + `h-full overflow-y-auto`
- **åŸåˆ™**: é¡µé¢å†…å®¹å¿…é¡»åœ¨è§†çª—èŒƒå›´å†…ï¼Œä¸äº§ç”Ÿå…¨å±€æ»šåŠ¨

### 3. AIè§’è‰²åˆ†å·¥è§„åˆ™
- **ç¦æ­¢**: å•ä¸€è§’è‰²åŒ…æ½æ‰€æœ‰å·¥ä½œ
- **è¦æ±‚**: å¿…é¡»è°ƒç”¨å¤šä¸ªAIè§’è‰²åˆ†å·¥åä½œ
- **åŸåˆ™**: æ¯ä¸ªè§’è‰²ä¸“æ³¨è‡ªå·±çš„ä¸“ä¸šé¢†åŸŸ

### 4. æµ‹è¯•å’Œå®¡è®¡è§„åˆ™
- **ç¦æ­¢**: ç«™åœ¨å¼€å‘è€…è§’åº¦è‡ªè¯´è‡ªè¯
- **è¦æ±‚**: å¿…é¡»ç«™åœ¨ç”¨æˆ·è§’åº¦éªŒè¯éœ€æ±‚æ˜¯å¦è¢«æ»¡è¶³
- **åŸåˆ™**: ç”¨æˆ·éœ€æ±‚æ˜¯å”¯ä¸€æ ‡å‡†ï¼Œä¸æ˜¯æŠ€æœ¯å®ç°

## ğŸ”„ æ‰§è¡Œæµç¨‹è§„èŒƒ

### å‘½ä»¤æ‰§è¡Œè§„èŒƒ
```bash
# âœ… æ­£ç¡® - åå°æ‰§è¡Œï¼Œä¸é˜»æ–­ä¼šè¯
nohup npm start > /dev/null 2>&1 &
npx vite --port 3002 --host &

# âŒ é”™è¯¯ - ä¼šé˜»æ–­ä¼šè¯
npm start
npx vite --port 3002
```

### æ ·å¼è°ƒæ•´è§„èŒƒ
```css
/* âœ… æ­£ç¡® - å…¨å±è‡ªé€‚åº” */
.adaptive-layout {
  @apply h-screen overflow-hidden;
}
.content-container {
  @apply h-full overflow-y-auto;
}

/* âŒ é”™è¯¯ - ä¼šäº§ç”Ÿå…¨å±€æ»šåŠ¨æ¡ */
.page {
  @apply min-h-screen;
}
```

### AIè§’è‰²è°ƒç”¨è§„èŒƒ
```
@architect: è®¾è®¡æ¶æ„æ–¹æ¡ˆ
@backend: å®ç°åç«¯åŠŸèƒ½
@frontend: å¼€å‘å‰ç«¯ç•Œé¢
@tester: éªŒè¯åŠŸèƒ½å®Œæ•´æ€§
@reviewer: æ£€æŸ¥ä»£ç è´¨é‡
@auditor: ç¡®ä¿ç”¨æˆ·éœ€æ±‚æ»¡è¶³
```
