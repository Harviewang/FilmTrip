# FilmTrip 自适应设计指南

## 📋 文档信息
- **版本**: v1.0
- **创建日期**: 2025-01-21
- **状态**: 设计规范制定中
- **最后更新**: 2025-01-21

> 📖 **相关文档**：[前端设计规范](./前端设计规范.md) | [开发计划](./开发计划.md) | [需求文档](./需求文档-统一版.md)

## 🎯 自适应设计原则

### 1. 全宽度自适应
- **目标**: 所有页面都能充分利用视口宽度
- **实现**: 使用 `w-full` 和响应式容器
- **原则**: 避免固定宽度，支持任意屏幕尺寸

### 2. 全高度自适应
- **目标**: 页面高度充分利用视口空间
- **实现**: 使用 `h-full min-h-screen` 和 Flexbox 布局
- **原则**: 内容区域自动扩展，避免内容截断

### 3. 响应式断点统一
- **移动端**: < 640px (sm)
- **平板端**: 640px - 1024px (sm-lg)
- **桌面端**: > 1024px (lg+)
- **大屏端**: > 1280px (xl+)

## 🏗️ 技术实现方案

### 1. CSS 基础架构

#### 1.1 全局自适应规则
```css
/* 根元素自适应 */
html, body, #root {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
}

/* 全屏自适应布局 */
.fullscreen-adaptive {
  width: 100vw;
  height: 100vh;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* 内容区域自适应 */
.content-adaptive {
  width: 100%;
  flex: 1;
  display: flex;
  flex-direction: column;
}
```

#### 1.2 响应式网格系统
```css
.grid-adaptive {
  display: grid;
  gap: 1.5rem;
  grid-template-columns: repeat(1, 1fr);
}

@media (min-width: 640px) {
  .grid-adaptive {
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem;
  }
}

@media (min-width: 1024px) {
  .grid-adaptive {
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
  }
}
```

### 2. Tailwind CSS 配置

#### 2.1 自定义断点
```javascript
screens: {
  'xs': '475px',
  '3xl': '1600px',
  '4xl': '1920px',
}
```

#### 2.2 自定义容器
```javascript
container: {
  center: true,
  padding: {
    DEFAULT: '1rem',
    sm: '1.5rem',
    lg: '2rem',
    xl: '2.5rem',
    '2xl': '3rem',
  },
  screens: {
    sm: '640px',
    md: '768px',
    lg: '1024px',
    xl: '1280px',
    '2xl': '1536px',
  },
}
```

## 🧩 组件级自适应

### 1. AdaptiveLayout 组件

#### 1.1 基本用法
```jsx
import AdaptiveLayout from '../../components/AdaptiveLayout';

const MyPage = () => {
  return (
    <AdaptiveLayout 
      background="default"
      fullWidth={true}
      fullHeight={true}
    >
      {/* 页面内容 */}
    </AdaptiveLayout>
  );
};
```

#### 1.2 属性说明
- `background`: 背景样式 (default, white, gray, blue, dark)
- `fullWidth`: 是否全宽度 (默认: true)
- `fullHeight`: 是否全高度 (默认: true)
- `container`: 是否使用容器约束 (默认: true)
- `padding`: 是否添加内边距 (默认: true)

### 2. AdaptiveGrid 组件

#### 2.1 基本用法
```jsx
import { AdaptiveGrid } from '../../components/AdaptiveLayout';

const PhotoGrid = () => {
  return (
    <AdaptiveGrid cols="auto-fit" gap="default">
      {photos.map(photo => (
        <PhotoCard key={photo.id} photo={photo} />
      ))}
    </AdaptiveGrid>
  );
};
```

#### 2.2 网格配置
- `cols`: 列数配置 (auto-fit, auto-fill, responsive)
- `gap`: 间距大小 (small, default, large)
- `minWidth`: 最小列宽 (默认: 280px)

### 3. AdaptiveCard 组件

#### 3.1 基本用法
```jsx
import { AdaptiveCard } from '../../components/AdaptiveLayout';

const PhotoCard = ({ photo }) => {
  return (
    <AdaptiveCard 
      hover={true}
      shadow="default"
      rounded="xl"
    >
      {/* 卡片内容 */}
    </AdaptiveCard>
  );
};
```

#### 3.2 样式配置
- `hover`: 是否启用悬停效果 (默认: true)
- `shadow`: 阴影大小 (none, small, default, large, hover)
- `rounded`: 圆角大小 (none, sm, default, lg, full)

## 📱 移动端优化

### 1. 触摸友好设计

#### 1.1 按钮尺寸
```css
/* 最小触摸目标 */
.min-touch-target {
  min-width: 44px;
  min-height: 44px;
}

/* 移动端按钮 */
.mobile-btn {
  @apply w-full sm:w-auto px-6 py-4 text-lg;
}
```

#### 1.2 间距优化
```css
/* 移动端间距 */
@media (max-width: 767px) {
  .mobile-optimized {
    padding: 1rem;
  }
  
  .mobile-text {
    font-size: 0.875rem;
    line-height: 1.25rem;
  }
}
```

### 2. 手势支持

#### 2.1 滑动支持
```jsx
// 支持左右滑动切换照片
const handleSwipe = (direction) => {
  if (direction === 'left') {
    // 下一张照片
  } else if (direction === 'right') {
    // 上一张照片
  }
};
```

#### 2.2 缩放支持
```jsx
// 支持双指缩放
const handlePinch = (scale) => {
  setImageScale(scale);
};
```

## 🖥️ 桌面端优化

### 1. 大屏适配

#### 1.1 宽屏布局
```css
@media (min-width: 1280px) {
  .large-screen-optimized {
    padding: 2.5rem;
  }
  
  .wide-grid {
    grid-template-columns: repeat(6, 1fr);
  }
}
```

#### 1.2 高分辨率支持
```css
@media (min-width: 1920px) {
  .ultra-wide {
    max-width: 1400px;
  }
}
```

### 2. 键盘快捷键

#### 2.1 常用快捷键
```jsx
useEffect(() => {
  const handleKeyDown = (e) => {
    switch (e.key) {
      case 'Escape':
        closeModal();
        break;
      case 'h':
      case 'H':
        toggleUI();
        break;
      case 'ArrowLeft':
        previousPhoto();
        break;
      case 'ArrowRight':
        nextPhoto();
        break;
    }
  };

  document.addEventListener('keydown', handleKeyDown);
  return () => document.removeEventListener('keydown', handleKeyDown);
}, []);
```

## 🔧 开发工具和调试

### 1. 响应式调试

#### 1.1 断点指示器
```jsx
const BreakpointIndicator = () => {
  const [breakpoint, setBreakpoint] = useState('');

  useEffect(() => {
    const updateBreakpoint = () => {
      const width = window.innerWidth;
      if (width < 640) setBreakpoint('xs');
      else if (width < 768) setBreakpoint('sm');
      else if (width < 1024) setBreakpoint('md');
      else if (width < 1280) setBreakpoint('lg');
      else setBreakpoint('xl');
    };

    updateBreakpoint();
    window.addEventListener('resize', updateBreakpoint);
    return () => window.removeEventListener('resize', updateBreakpoint);
  }, []);

  return (
    <div className="fixed top-4 left-4 bg-black/80 text-white px-2 py-1 rounded text-xs z-50">
      {breakpoint}
    </div>
  );
};
```

#### 1.2 自适应状态监控
```jsx
const AdaptiveMonitor = () => {
  const [dimensions, setDimensions] = useState({
    width: window.innerWidth,
    height: window.innerHeight
  });

  useEffect(() => {
    const handleResize = () => {
      setDimensions({
        width: window.innerWidth,
        height: window.innerHeight
      });
    };

    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  return (
    <div className="fixed bottom-4 left-4 bg-black/80 text-white px-2 py-1 rounded text-xs z-50">
      {dimensions.width} × {dimensions.height}
    </div>
  );
};
```

## 📋 检查清单

### 1. 宽度自适应检查
- [ ] 页面容器使用 `w-full`
- [ ] 避免固定宽度值
- [ ] 响应式断点设置正确
- [ ] 移动端和桌面端都正常显示

### 2. 高度自适应检查
- [ ] 页面容器使用 `h-full min-h-screen`
- [ ] 内容区域使用 `flex-1`
- [ ] 避免内容截断
- [ ] 滚动条正常工作

### 3. 响应式检查
- [ ] 移动端 (< 640px) 正常显示
- [ ] 平板端 (640px - 1024px) 正常显示
- [ ] 桌面端 (> 1024px) 正常显示
- [ ] 大屏端 (> 1280px) 正常显示

### 4. 交互检查
- [ ] 触摸操作友好
- [ ] 键盘快捷键支持
- [ ] 悬停效果正常
- [ ] 动画流畅

## 🚀 最佳实践

### 1. 布局原则
- 优先使用 Flexbox 和 Grid 布局
- 避免绝对定位和固定尺寸
- 使用相对单位 (rem, em, %) 而非固定像素
- 考虑内容优先的设计理念

### 2. 性能优化
- 使用 CSS 变量管理主题
- 避免过度使用媒体查询
- 合理使用 CSS 动画
- 图片懒加载和响应式图片

### 3. 可维护性
- 使用语义化的类名
- 建立统一的组件库
- 文档化自定义样式
- 定期代码审查

---

**注意**: 本指南适用于所有新开发的页面和组件，确保 FilmTrip 项目在所有设备上都能提供一致的用户体验。
