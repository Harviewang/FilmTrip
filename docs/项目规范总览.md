# FilmTrip 项目规范总览文档

> **重要说明**: 本文档是项目所有规范的总览和快速参考，所有团队成员和AI助手都必须严格遵循。

## 📋 文档结构概览

### 核心设计文档
- [需求文档](./需求文档.md) - 产品需求规格说明书
- [数据库设计文档](./数据库设计.md) - 数据模型和存储方案
- [前端设计规范文档](./前端设计规范.md) - UI组件和交互设计
- [自适应设计指南](./自适应设计指南.md) - 响应式设计标准

### 开发规范文档
- [统一开发规范文档](./统一开发规范文档.md) - 代码规范和开发标准
- [测试策略文档](./测试策略文档.md) - 测试计划和质量保证
- [实施指南文档](./实施指南文档.md) - 开发步骤和部署流程

### 实施与执行文档
- [快速参考指南](./快速参考指南.md) - 常用工具和命令
- [质量检查清单](./质量检查清单.md) - 快速检查清单
- [开发追踪系统](./开发追踪系统.md) - 质量控制流程

---

## 🎯 核心规范原则

### 原则1: 分工明确 - CLEAR DIVISION
每个Agent角色职责边界清晰，严禁越界操作

### 原则2: 思考-确认-执行 - THINK-CONFIRM-ACT  
任何操作都必须经过：深度思考 → 方案确认 → 谨慎执行 → 自查验证 → 用户确认

### 原则3: 总结留痕 - DOCUMENT & TRACK
每次协作必须记录过程，总结经验，为后续开发提供指导

---

## 🤖 Agent角色职责边界

| 角色 | 核心职责 | 工作边界 |
|------|----------|----------|
| @planner | 需求分析、任务分解、资源分配 | 只负责规划，不参与具体实现 |
| @architect | 技术方案设计、架构决策 | 专注架构层面，不涉及具体编码 |
| @backend | API实现、业务逻辑、数据处理 | 只处理服务端逻辑 |
| @frontend | UI组件、用户交互、状态管理 | 专注客户端实现 |
| @database | 数据建模、查询优化、性能调优 | 专注数据层 |
| @tester | 测试策略、用例编写、质量保证 | 专注质量保证 |
| @reviewer | 代码审查、方案评估、质量把关 | 专注质量审查 |
| @documenter | 文档编写、知识管理、经验总结 | 专注文档和知识管理 |

---

## 🚨 强制执行规则

### 🚫 禁止行为
1. **禁止跳过思考阶段**: 任何Agent都不能直接开始执行，必须先分析思考
2. **禁止越权操作**: Agent不能处理职责范围外的任务
3. **禁止跳过审查环节**: 所有输出都必须经过@reviewer审查
4. **禁止跳过用户确认**: 重要决策必须获得用户确认
5. **禁止忽略总结环节**: 每次协作必须有总结和记录

### ✅ 必须行为
1. **必须以需求分析开始**: 每个会话都必须由@planner进行需求分析
2. **必须获得用户确认**: 执行方案必须得到用户明确同意
3. **必须记录会话目标**: 明确本次会话要达成的具体目标
4. **必须三级检查**: 自查 → 交叉审查 → 用户验收
5. **必须文档化**: 所有决策和变更都必须有文档记录

---

## 📊 质量标准

### 代码质量
- 需求满足度: 100%
- 代码质量评分: >= 90分
- 测试通过率: 100%
- 用户满意度: >= 95%

### 文档质量
- 需求理解准确率: >= 95%
- 一次通过审查率: >= 80%
- 返工次数: <= 1次
- 按时交付率: >= 90%

---

## 🔄 标准工作流程

### 1. 需求接收与分析
```
用户提出需求 → @planner深度分析 → @architect评估可行性 → @reviewer审查准确性 → 输出《需求分析报告》
```

### 2. 方案设计与确认
```
@planner制定计划 → @architect设计方案 → 相关Agent分析工作 → @reviewer审查方案 → **用户确认** → 输出《执行方案书》
```

### 3. 分工执行与自查
```
各Agent并行执行 → 完成后自查 → 提交自查报告和成果物
```

### 4. 交叉审查与验证
```
@reviewer统筹审查 → @tester功能测试 → @architect检查一致性 → 发现问题返回修复 → 通过审查进入下阶段
```

### 5. 用户验收与确认
```
整理交付物 → **用户验收** → 用户反馈问题返回修复 → 用户确认满意进入总结
```

### 6. 总结记录与归档
```
@reviewer整理记录 → 各Agent提交总结 → @reviewer审查文档 → 归档知识库 → 输出《项目总结报告》
```

---

## 🛠️ 技术规范要点

### 前端开发
- **框架**: React + JavaScript + Tailwind CSS
- **状态管理**: React Context + Hooks
- **组件库**: 自定义组件 + Tailwind组件
- **构建工具**: Vite
- **代码规范**: ESLint + Prettier

### 后端开发
- **运行环境**: Node.js + Express.js
- **数据处理**: 照片管理、胶片数据、用户认证
- **文件处理**: Multer + Sharp + EXIF提取
- **性能优化**: 缩略图生成 + 懒加载

### 数据库设计
- **数据模型**: 三层结构（胶片品类→胶卷实例→照片）
- **存储方案**: SQLite + 文件系统存储
- **查询优化**: 索引策略 + 分页机制

### 测试策略
- **单元测试**: Jest + 后端API测试
- **集成测试**: 前后端接口测试
- **端到端测试**: 用户流程测试
- **性能测试**: 图片加载性能验证

---

## 📋 快速检查清单

### 开发前检查
- [ ] 需求分析是否完整准确
- [ ] 技术方案是否合理可行
- [ ] 任务分工是否明确具体
- [ ] 用户是否已确认方案

### 开发中检查
- [ ] 是否按职责边界执行
- [ ] 代码质量是否符合规范
- [ ] 功能实现是否符合需求
- [ ] 自查报告是否完成

### 交付前检查
- [ ] 所有功能是否正常运行
- [ ] 用户需求是否100%满足
- [ ] 代码质量审查是否通过
- [ ] 文档资料是否齐全完整

---

## 🎯 FilmTrip项目特定配置

### 核心业务模块分工
- **照片管理系统**: @backend + @frontend + @database + @tester
- **用户认证系统**: @backend + @frontend + @database + @tester  
- **胶片数据管理**: @backend + @frontend + @database
- **地图定位功能**: @frontend + @backend + @database
- **数据统计分析**: @backend + @frontend + @database
- **文件上传处理**: @backend + @devops + @tester

### 技术栈职责分工
- **React/Tailwind前端**: @frontend专责
- **Node.js/Express后端**: @backend专责  
- **SQLite数据模型**: @database专责
- **测试框架**: @tester专责
- **Vercel部署**: @devops专责

---

## 🚨 紧急情况处理

### 当出现以下情况时，立即停止当前工作：
1. 发现严重的架构设计缺陷
2. 用户需求发生重大变更
3. 关键依赖出现不可解决的问题
4. 数据安全或隐私风险

### 处理流程：
1. 立即通知@reviewer和用户
2. 评估影响范围和解决方案
3. 获得用户确认后调整计划
4. 更新相关文档和记录

---

## 🔄 持续改进机制

### 每次协作后必须：
1. 总结经验教训和最佳实践
2. 识别流程中的改进点
3. 更新相关规范和文档
4. 分享知识给团队成员

### 定期评估：
- **周评估**: 工作效率和质量指标
- **月评估**: 流程优化和规范更新
- **季评估**: 整体架构和技术栈评估

---

## 📚 相关文档链接

- [.cursorrules](../.cursorrules) - AI助手协作规则
- [需求文档](./需求文档.md) - 产品需求规格说明书
- [质量检查清单](./质量检查清单.md) - 质量控制流程
- [快速参考指南](./快速参考指南.md) - 实用工具和命令

---

**版本**: v2.0 | **更新日期**: 2024年 | **适用项目**: FilmTrip

> **重要提醒**: 本规范为强制执行标准，任何违反都将影响项目质量。每个Agent都有监督其他Agent遵守规则的责任，用户有权要求重新执行不符合规则的流程。