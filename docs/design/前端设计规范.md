# FilmTrip 前端设计规范

## 📋 文档信息
- **版本**: v1.0
- **创建日期**: 2025-01-21
- **状态**: 设计规范制定中
- **最后更新**: 2025-01-21

> 📖 **相关文档**：[需求文档](./需求文档-统一版.md) | [开发计划](./开发计划.md) | [数据库设计](./数据库设计.md)

## 🎯 设计原则

### 1. 胶片摄影风格
- **复古文艺**：体现胶片摄影的经典美学
- **专业感**：符合摄影行业的专业标准
- **质感表现**：突出胶片的独特质感和色彩

### 2. 用户体验优先
- **直观易用**：操作流程简单明了
- **响应迅速**：交互反馈及时准确
- **一致性**：统一的视觉语言和交互模式

### 3. 技术实现
- **现代化**：使用最新的前端技术栈
- **性能优化**：图片懒加载、代码分割等
- **响应式**：支持多设备适配

## 🎨 视觉设计规范

### 1. 色彩系统

#### 1.1 主色调
- **主色**：`#2563EB` (蓝色) - 代表专业和信任
- **辅助色**：`#10B981` (绿色) - 代表自然和生命
- **强调色**：`#F59E0B` (橙色) - 代表温暖和活力

#### 1.2 中性色
- **文字主色**：`#111827` (深灰) - 主要文字
- **文字次色**：`#6B7280` (中灰) - 次要文字
- **背景色**：`#F9FAFB` (浅灰) - 页面背景
- **边框色**：`#E5E7EB` (浅灰) - 分割线

#### 1.3 状态色
- **成功**：`#10B981` (绿色)
- **警告**：`#F59E0B` (橙色)
- **错误**：`#EF4444` (红色)
- **信息**：`#3B82F6` (蓝色)

### 2. 字体规范

#### 2.1 字体族
- **中文**：`-apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif`
- **英文**：`Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`

#### 2.2 字号规范
- **标题1**：`text-3xl` (30px) - 页面主标题
- **标题2**：`text-2xl` (24px) - 区块标题
- **标题3**：`text-xl` (20px) - 卡片标题
- **正文**：`text-base` (16px) - 主要内容
- **辅助文字**：`text-sm` (14px) - 说明文字
- **注释文字**：`text-xs` (12px) - 标签、时间等

### 3. 间距系统

#### 3.1 基础间距
- **4px**：最小间距单位
- **8px**：元素内边距
- **16px**：元素间距
- **24px**：区块间距
- **32px**：页面间距
- **48px**：大区块间距

#### 3.2 组件间距
```css
/* 卡片内边距 */
.p-4    /* 16px */
.p-6    /* 24px */

/* 元素间距 */
.space-y-4    /* 16px */
.space-y-6    /* 24px */
.space-y-8    /* 32px */

/* 外边距 */
.m-4    /* 16px */
.m-6    /* 24px */
.m-8    /* 32px */
```

## 🧩 组件设计规范

### 1. 按钮组件

#### 1.1 主要按钮
```jsx
<button className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
  主要操作
</button>
```

#### 1.2 次要按钮
```jsx
<button className="bg-white hover:bg-gray-50 text-blue-600 border border-blue-600 px-6 py-3 rounded-lg font-medium transition-colors">
  次要操作
</button>
```

#### 1.3 危险按钮
```jsx
<button className="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
  危险操作
</button>
```

### 2. 卡片组件

#### 2.1 基础卡片
```jsx
<div className="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
  <div className="p-6">
    {/* 卡片内容 */}
  </div>
</div>
```

#### 2.2 图片卡片
```jsx
<div className="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
  <div className="h-48 bg-gray-200">
    <img src={image} alt={title} className="w-full h-full object-cover" />
  </div>
  <div className="p-6">
    {/* 卡片内容 */}
  </div>
</div>
```

### 3. 表单组件

#### 3.1 输入框
```jsx
<input
  type="text"
  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
  placeholder="请输入内容"
/>
```

#### 3.2 下拉选择
```jsx
<select className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
  <option>选择选项</option>
</select>
```

## 📱 页面布局规范

### 1. 响应式断点

```css
/* 手机端 */
@media (max-width: 767px) {
  /* 手机端样式 */
}

/* 平板端 */
@media (min-width: 768px) and (max-width: 1023px) {
  /* 平板端样式 */
}

/* 桌面端 */
@media (min-width: 1024px) {
  /* 桌面端样式 */
}
```

### 2. 网格系统

#### 2.1 基础网格
```jsx
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  {/* 网格项目 */}
</div>
```

#### 2.2 响应式列数
- **手机端**：1列 (`grid-cols-1`)
- **平板端**：2列 (`md:grid-cols-2`)
- **桌面端**：3列 (`lg:grid-cols-3`)

### 3. 容器宽度

```jsx
<div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
  {/* 页面内容 */}
</div>
```

## 🖼️ 图片处理规范

### 1. 图片格式

#### 1.1 支持格式
- **JPEG**：照片、复杂图像
- **PNG**：透明背景、图标
- **SVG**：图标、占位符
- **WebP**：现代浏览器优化格式

#### 1.2 图片优化
- **压缩**：使用适当的压缩比例
- **尺寸**：提供多种尺寸版本
- **懒加载**：图片进入视口时加载

### 2. 占位符图片

#### 2.1 本地占位符
```jsx
// 使用本地SVG占位符
<img src="/placeholder-photo.svg" alt="占位符" />
```

#### 2.2 错误处理
```jsx
<img
  src={imageUrl}
  alt={title}
  onError={(e) => {
    e.target.src = '/placeholder-photo.svg';
  }}
/>
```

## 🔄 交互设计规范

### 1. 加载状态

#### 1.1 页面加载
```jsx
<div className="flex items-center justify-center h-64">
  <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
</div>
```

#### 1.2 按钮加载
```jsx
<button disabled={loading} className="...">
  {loading ? '加载中...' : '提交'}
</button>
```

### 2. 过渡动画

#### 2.1 悬停效果
```jsx
<div className="transition-all duration-200 hover:scale-105 hover:shadow-lg">
  {/* 内容 */}
</div>
```

#### 2.2 颜色过渡
```jsx
<button className="transition-colors duration-200 hover:bg-blue-700">
  {/* 按钮内容 */}
</button>
```

### 3. 反馈机制

#### 3.1 成功提示
```jsx
<div className="bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg">
  操作成功！
</div>
```

#### 3.2 错误提示
```jsx
<div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
  操作失败，请重试
</div>
```

## 📱 移动端适配

### 1. 触摸友好

#### 1.1 按钮尺寸
- **最小触摸目标**：44px × 44px
- **按钮高度**：48px 或更大
- **间距**：8px 或更大

#### 1.2 手势支持
- **滑动**：支持左右滑动切换
- **缩放**：支持双指缩放图片
- **长按**：支持长按显示菜单

### 2. 移动端优化

#### 2.1 性能优化
- **图片压缩**：移动端使用较小尺寸
- **懒加载**：优先加载可视区域内容
- **代码分割**：按需加载组件

#### 2.2 用户体验
- **快速响应**：触摸反馈及时
- **清晰导航**：面包屑和返回按钮
- **简化操作**：减少不必要的步骤

## 🚀 性能优化规范

### 1. 图片优化

#### 1.1 懒加载
```jsx
import { LazyLoadImage } from 'react-lazy-load-image-component';

<LazyLoadImage
  src={image}
  alt={title}
  effect="blur"
  placeholderSrc="/placeholder-photo.svg"
/>
```

#### 1.2 响应式图片
```jsx
<img
  srcSet={`${imageSmall} 300w, ${imageMedium} 600w, ${imageLarge} 900w`}
  sizes="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw"
  src={imageMedium}
  alt={title}
/>
```

### 2. 代码优化

#### 2.1 组件懒加载
```jsx
import { lazy, Suspense } from 'react';

const LazyComponent = lazy(() => import('./LazyComponent'));

<Suspense fallback={<div>加载中...</div>}>
  <LazyComponent />
</Suspense>
```

#### 2.2 状态管理
```jsx
// 使用 useMemo 优化计算
const expensiveValue = useMemo(() => {
  return computeExpensiveValue(data);
}, [data]);

// 使用 useCallback 优化函数
const handleClick = useCallback(() => {
  // 处理点击事件
}, []);
```

## 📋 开发规范

### 1. 代码组织

#### 1.1 文件结构
```
src/
├── components/     # 通用组件
├── pages/         # 页面组件
├── hooks/         # 自定义Hook
├── utils/         # 工具函数
├── services/      # API服务
└── assets/        # 静态资源
```

#### 1.2 命名规范
- **组件**：PascalCase (如 `PhotoCard`)
- **文件**：kebab-case (如 `photo-card.jsx`)
- **变量**：camelCase (如 `photoData`)
- **常量**：UPPER_SNAKE_CASE (如 `API_BASE_URL`)

### 2. 组件设计

#### 2.1 组件原则
- **单一职责**：每个组件只负责一个功能
- **可复用性**：组件应该可以在不同场景下复用
- **可测试性**：组件应该易于测试
- **可维护性**：组件应该易于理解和修改

#### 2.2 组件结构
```jsx
import React from 'react';
import PropTypes from 'prop-types';

const ComponentName = ({ prop1, prop2, children }) => {
  // 状态定义
  const [state, setState] = useState(initialState);
  
  // 副作用
  useEffect(() => {
    // 副作用逻辑
  }, []);
  
  // 事件处理
  const handleEvent = () => {
    // 事件处理逻辑
  };
  
  // 渲染
  return (
    <div className="component-class">
      {children}
    </div>
  );
};

// PropTypes 定义
ComponentName.propTypes = {
  prop1: PropTypes.string.isRequired,
  prop2: PropTypes.number,
  children: PropTypes.node,
};

// 默认值
ComponentName.defaultProps = {
  prop2: 0,
};

export default ComponentName;
```

## 📝 相关文档

- **[需求文档](./需求文档-统一版.md)** - 业务需求和功能规格
- **[开发计划](./开发计划.md)** - 项目执行计划
- **[数据库设计](./数据库设计.md)** - 数据模型设计

---

## 🎨 时间轴页面设计规范（2025-01-21更新）

### 1. 视图模式设计

#### 1.1 网格模式（Grid）
- **设计原则**：简洁干净，专注照片浏览
- **布局**：响应式网格，支持1-4列自适应
- **交互**：点击照片打开预览模态框
- **特点**：无时间轴，按时间排序，支持懒加载

#### 1.2 时间轴模式（Timeline）
- **设计原则**：按时间组织，便于查找特定日期
- **布局**：日期标题 + 照片网格
- **日期显示**：`2025年8月21日星期四 · 4张照片`
- **特点**：简单分组，不复杂，易于理解

### 2. 照片预览模态框设计

#### 2.1 视觉设计
- **背景**：渐变背景 `bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50`
- **模糊效果**：`backdrop-blur-md`
- **图片尺寸**：固定高度80vh，宽度自适应
- **圆角**：`rounded-2xl`

#### 2.2 交互设计
- **UI隐藏**：点击图片隐藏/显示所有UI元素
- **动画效果**：图片偏移和重新居中的平滑过渡
- **键盘快捷键**：
  - `H`：切换UI显示
  - `ESC`：关闭模态框
  - `←/→`：浏览上一张/下一张照片

#### 2.3 信息展示
- **位置**：底部固定信息栏
- **样式**：半透明白色背景，模糊效果
- **内容**：固定显示6个核心字段（评级、胶卷、相机、拍摄地点、拍摄时间、加密状态）
  - **注意**：胶片摄影不记录EXIF信息（光圈、快门、ISO等），因此底部信息栏仅显示胶片摄影相关的元数据
  - **地理信息**：点击地点可查看迷你地图
- **布局**：响应式网格布局（移动端2列，平板3列，桌面6列）

### 3. 响应式设计

#### 3.1 断点设置
```css
/* 移动端 */
@media (max-width: 640px) {
  .grid-cols-1 { /* 1列 */ }
}

/* 平板 */
@media (min-width: 768px) {
  .md:grid-cols-2 { /* 2列 */ }
}

/* 桌面 */
@media (min-width: 1024px) {
  .lg:grid-cols-3 { /* 3列 */ }
}

/* 大屏 */
@media (min-width: 1280px) {
  .xl:grid-cols-4 { /* 4列 */ }
}
```

#### 3.2 图片适配
- **网格模式**：固定高度64（h-64），宽度自适应
- **预览模式**：标准模式最长边=显示区域80%，沉浸模式最长边=显示区域90%
- **EXIF方向处理**：图片打开时默认加载正确方向（基于EXIF），上传时EXIF orientation会被处理
- **旋转功能**：可持续旋转（不限制360度），无反转动作，纯旋转
- **重置机制**：切换图片和关闭预览后都重置（不做记忆，不修改方向）
- **沉浸模式**：沉浸模式下不显示多余按钮，退出沉浸模式有两种情况（退到标准预览/退出预览）
- **加载失败**：显示占位图 `/placeholder-photo.svg`

### 4. 性能优化

#### 4.1 懒加载
- 使用 `IntersectionObserver` API
- 图片进入视口时才开始加载
- 支持无限滚动

#### 4.2 状态管理
- 使用 `useMemo` 优化照片分组计算
- 使用 `useCallback` 优化事件处理函数
- 避免不必要的重新渲染

### 5. 用户体验

#### 5.1 加载状态
- 显示加载指示器
- 图片加载失败时显示占位图
- 支持重试机制

#### 5.2 错误处理
- 网络错误友好提示
- 图片加载失败降级处理
- 控制台错误日志记录

---

*本文档定义了前端开发的设计规范和标准，确保代码质量和用户体验的一致性。如有疑问或需要更新，请联系前端开发负责人。*
