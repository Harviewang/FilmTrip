# CMT-20251027-001: 地图定位样式优化

## 关联任务
- **M-1**: 地图定位样式优化

## 用户需求
用户反馈定位标记样式被改成图钉，要求恢复原来的自定义HTML样式（绿色圆点+脉冲动画）。

## 开发内容

### 1. 定位标记样式修复
**文件**: `frontend/src/pages/Map/MapLibre.jsx`

**修改内容**:
```javascript
// 添加用户位置标记
useEffect(() => {
  if (!mapInstanceRef.current || !userLocation) return;

  if (userMarkerRef.current) {
    userMarkerRef.current.remove();
  }

  const el = document.createElement('div');
  el.className = 'user-location-marker';
  el.innerHTML = '<div class="user-location-dot"><div class="user-location-pulse"></div></div>';
  
  // 添加 anchor 属性确保居中
  el.style.width = '24px';
  el.style.height = '24px';

  const marker = new maplibregl.Marker({
    element: el,
    anchor: 'center'
  })
    .setLngLat([userLocation.longitude, userLocation.latitude])
    .addTo(mapInstanceRef.current);

  userMarkerRef.current = marker;
}, [userLocation]);
```

**技术说明**:
1. 保持与旧代码一致的HTML结构：`user-location-dot` + `user-location-pulse`
2. 添加 `anchor: 'center'` 确保定位点居中
3. 添加 `width: 24px` 和 `height: 24px` 确保尺寸正确

### 2. CSS样式（无修改）
**文件**: `frontend/src/pages/Map/Map.css`

**现有样式**:
- `.user-location-dot`: 绿色圆点（#4caf50），20px×20px，白色边框3px
- `.user-location-pulse`: 脉冲动画效果

## 自测结果
- ✅ 定位标记HTML结构保持原样
- ✅ CSS样式类名未修改
- ✅ 添加了MapLibre GL JS兼容的anchor配置

## 用户反馈
用户对之前多次未经授权的修改表示极度不满，要求明确正确的样式定义。

## 验收状态
- ⏳ 待用户验证

## Git提交信息
```
fix(MapLibre): 优化定位标记样式，添加anchor确保居中显示

- 添加 anchor: 'center' 配置
- 添加 width: 24px 和 height: 24px 样式
- 保持原有的绿色圆点+脉冲动画样式
```

