# 胶卷页面需求文档

## 1. 项目概述

### 1.1 项目背景
FilmTrip 是一个胶片摄影管理系统，胶卷页面是系统的核心功能模块，用于展示和管理用户的胶卷收藏。该页面需要体现胶片摄影的怀旧感和专业性，同时提供现代化的交互体验。

### 1.2 设计目标
- 以时间轴方式组织胶卷，体现胶片摄影的时间性
- 提供直观的胶卷展示和照片浏览体验
- 保持胶片摄影的视觉语言和怀旧感
- 支持高效的胶卷管理和照片查看

## 2. 功能需求

### 2.1 页面布局

#### 2.1.1 整体布局
- **左侧时间轴区域**：宽度 300px，固定高度，垂直滚动
- **右侧胶卷展示区域**：自适应宽度，网格布局展示胶卷
- **响应式设计**：支持桌面端和移动端适配

#### 2.1.2 时间轴设计（参考第三张图）
- **垂直时间轴**：按年份从最新到最旧排列
- **年份节点**：圆形节点标记年份，连接线连接
- **时间范围显示**：显示每个胶卷的拍摄时间范围
- **筛选功能**：点击年份筛选对应年份的胶卷
- **统计信息**：显示每年拍摄的胶卷数量

### 2.2 胶卷展示（参考第一张图）

#### 2.2.1 胶卷卡片设计
- **网格布局**：3列网格，响应式调整
- **卡片内容**：
  - 胶卷包装图片（胶卷筒/包装盒）
  - 胶卷名称和品牌信息
  - 胶卷规格（ISO、类型、格式）
  - 拍摄时间范围
  - 照片数量统计
  - 状态标识（已开封/未开封/已冲洗等）

#### 2.2.2 胶卷状态管理
- **未开封**：胶卷未开始拍摄
- **拍摄中**：胶卷正在使用
- **已曝光**：胶卷拍摄完成，未冲洗
- **已冲洗**：胶卷已冲洗，未扫描
- **已扫描**：胶卷已扫描，照片可查看

### 2.3 胶卷展开交互（参考第二张图）

#### 2.3.1 展开动画
- **触发方式**：点击胶卷卡片
- **动画效果**：从胶卷筒横向拉出胶片条
- **视觉设计**：胶片条从胶卷筒自然延伸，保持胶片摄影的视觉语言

#### 2.3.2 胶片条展示
- **胶片条结构**：黑色背景，白色边框，模拟真实胶片
- **照片帧**：胶片条上的每个帧显示一张照片
- **时间顺序**：照片按拍摄时间顺序排列
- **交互方式**：支持左右滑动浏览照片

#### 2.3.3 照片查看
- **点击放大**：点击胶片条上的照片可以放大查看
- **照片操作**：支持旋转、缩放、EXIF信息查看
- **导航功能**：支持上一张/下一张照片切换

## 3. 视觉设计

### 3.1 色彩方案
- **主背景**：深灰色 (#2D2D2D)
- **胶卷卡片**：白色背景 (#FFFFFF)
- **文字颜色**：深灰色 (#333333)
- **强调色**：金色 (#FFD700) 用于重要信息
- **胶片条**：黑色背景 (#000000)，白色边框 (#FFFFFF)

### 3.2 字体规范
- **主标题**：24px，粗体
- **胶卷名称**：18px，中等粗细
- **胶卷信息**：14px，常规
- **时间轴标签**：16px，中等粗细

### 3.3 间距规范
- **胶卷卡片间距**：16px
- **时间轴节点间距**：24px
- **页面边距**：24px
- **内容区域边距**：16px

## 4. 交互设计

### 4.1 时间轴交互
- **年份筛选**：点击年份节点筛选对应年份的胶卷
- **滚动导航**：支持鼠标滚轮和触摸滚动
- **时间范围选择**：支持选择特定时间范围

### 4.2 胶卷交互
- **卡片悬停**：鼠标悬停时显示阴影效果
- **点击展开**：点击胶卷卡片展开胶片条
- **状态切换**：支持胶卷状态的快速切换

### 4.3 胶片条交互
- **横向滑动**：支持左右滑动浏览照片
- **照片点击**：点击照片放大查看
- **关闭操作**：点击空白区域或关闭按钮收起胶片条

## 5. 技术需求

### 5.1 前端技术
- **框架**：React 18+
- **样式**：Tailwind CSS
- **动画**：Framer Motion
- **状态管理**：React Context + useReducer
- **图片处理**：Sharp.js（客户端）

### 5.2 后端API
- **GET /api/film-rolls**：获取胶卷列表
- **GET /api/film-rolls/:id/photos**：获取胶卷照片
- **GET /api/film-rolls/timeline**：获取时间轴数据
- **PUT /api/film-rolls/:id/status**：更新胶卷状态

### 5.3 数据结构

#### 5.3.1 胶卷数据
```typescript
interface FilmRoll {
  id: string;
  rollNumber: string;
  filmStockId: string;
  name: string;
  status: 'unopened' | 'shooting' | 'exposed' | 'developed' | 'scanned';
  openedDate: string;
  finishedDate?: string;
  location?: string;
  cameraName?: string;
  notes?: string;
  photoCount: number;
  filmStock: {
    brand: string;
    series: string;
    iso: number;
    type: string;
    format: string;
    imageUrl?: string;
  };
}
```

#### 5.3.2 时间轴数据
```typescript
interface TimelineData {
  year: number;
  filmRolls: FilmRoll[];
  totalCount: number;
  dateRange: {
    start: string;
    end: string;
  };
}
```

## 6. 性能要求

### 6.1 加载性能
- **首屏加载时间**：< 2秒
- **胶卷列表加载**：< 1秒
- **照片加载**：支持懒加载，< 500ms

### 6.2 交互性能
- **动画流畅度**：60fps
- **滚动响应**：< 16ms
- **点击响应**：< 100ms

## 7. 兼容性要求

### 7.1 浏览器支持
- **Chrome**：90+
- **Firefox**：88+
- **Safari**：14+
- **Edge**：90+

### 7.2 设备支持
- **桌面端**：1920x1080及以上分辨率
- **平板端**：768x1024及以上分辨率
- **移动端**：375x667及以上分辨率

## 8. 验收标准

### 8.1 功能验收
- [ ] 时间轴正确显示胶卷按年份排序
- [ ] 胶卷卡片正确显示胶卷信息
- [ ] 点击胶卷卡片能正确展开胶片条
- [ ] 胶片条能正确显示照片
- [ ] 照片查看功能正常工作
- [ ] 胶卷状态切换功能正常

### 8.2 视觉验收
- [ ] 页面布局符合设计要求
- [ ] 色彩方案统一一致
- [ ] 动画效果流畅自然
- [ ] 响应式设计正常工作

### 8.3 性能验收
- [ ] 页面加载时间符合要求
- [ ] 交互响应时间符合要求
- [ ] 动画流畅度符合要求

## 9. 开发计划

### 9.1 第一阶段：基础布局
- 实现页面基础布局
- 实现时间轴组件
- 实现胶卷网格展示

### 9.2 第二阶段：交互功能
- 实现胶卷展开动画
- 实现胶片条展示
- 实现照片查看功能

### 9.3 第三阶段：优化完善
- 性能优化
- 响应式适配
- 用户体验优化

---

**文档版本**：v1.0  
**创建时间**：2025-10-18  
**最后更新**：2025-10-18  
**负责人**：开发团队
