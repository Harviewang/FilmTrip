# 胶卷维度展示设计方案

## 一、设计目标

创建一个以胶卷为中心的浏览页面，展示：
1. **胶卷品类信息**（如 Kodak Gold 200）
2. **胶卷实例全生命周期**（拆包 → 装卷 → 拍摄 → 冲洗 → 扫描 → 归档）
3. **时间轴组织**（按时间维度浏览）
4. **照片集合展示**（每个胶卷包含的36张照片）

---

## 二、胶卷全生命周期定义

### 2.1 标准生命周期状态

建议统一的生命周期状态体系：

```
1. 未启封 (unopened)       - 胶卷还在包装盒里
2. 已启封 (opened)          - 拆开包装，准备使用
3. 已装卷 (loaded)          - 装进相机，准备拍摄
4. 拍摄中 (shooting)        - 正在拍摄
5. 已曝光 (exposed)         - 拍摄完成，等待冲洗
6. 冲洗中 (developing)      - 正在冲洗
7. 已冲洗 (developed)       - 冲洗完成，等待扫描
8. 扫描中 (scanning)        - 正在扫描
9. 已完成 (completed)       - 扫描完成，照片已整理
10. 已归档 (archived)       - 已归档保存
```

### 2.2 生命周期时间节点

每个状态对应的时间字段：

| 状态 | 时间字段 | 说明 |
|------|---------|------|
| 已启封 | `opened_date` | 拆开包装日期 |
| 已装卷 | `loaded_date` | 装进相机日期 |
| 已曝光 | `finished_date` | 拍摄完成日期 |
| 已冲洗 | `developed_date` | 冲洗完成日期 |
| 扫描完成 | `scanned_date` | 扫描完成日期 |
| 已归档 | `archived_date` | 归档日期 |

### 2.3 状态流转可视化

**建议UI设计：** 在胶卷详情卡片或页面顶部展示进度条形式：

```
[未启封] → [已启封] → [已装卷] → [拍摄中] → [已曝光] → [已冲洗] → [扫描中] → [已完成] → [已归档]
```

- 已完成的状态显示为绿色
- 当前状态显示为蓝色（高亮）
- 未到达的状态显示为灰色
- 点击每个状态节点可以查看该阶段的时间、地点、设备等详细信息

---

## 三、时间轴展示方案

### 方案A：纵向时间轴（推荐）

类似于GitHub贡献图，但更详细：

**布局结构：**
```
┌─────────────────────────────────────┐
│  2024年                              │
│  ├─ 一月                              │
│  │  └─ 📸 胶卷-001 / 胶卷-002 ...     │
│  ├─ 二月                              │
│  │  └─ 📸 胶卷-003 / 胶卷-004 ...     │
│  └─ 二月                              │
│     └─ ...                          │
└─────────────────────────────────────┘
```

**特性：**
- 左侧固定时间轴（年 → 月）
- 右侧胶卷卡片按时间线排列
- 支持点击时间节点快速定位
- 支持滚动加载历史胶卷

### 方案B：横向时间轴（传统风格）

类似Gantt图的横向时间轴：

**布局结构：**
```
时间轴: ────────●───────●───────●───────
         │       │       │       │
      2024-01  2024-02  2024-03  2024-04
         │       │       │       │
      [胶卷1]  [胶卷2]  [胶卷3]  [胶卷4]
```

### 方案C：日历视图

结合热力图的日历视图：

**布局结构：**
```
    一月 2024
 日 一 二 三 四 五 六
    1  2  3  4  5  6
  7  8  9 10 11 12 13
 14 15 16 17 18 19 20
 ...

有胶卷的日期显示为高亮，点击查看当天拍摄的胶卷
```

### 方案D：混合视图（推荐用于主页面）

结合多种视图的优势：

**顶部：** 简化的横向时间轴（年、月快速切换）
**主体：** 纵向时间轴 + 胶卷卡片网格

---

## 四、胶卷卡片展示

### 4.1 卡片基本信息

每个胶卷卡片应包含：

```
┌─────────────────────────┐
│  [胶卷品类缩略图]        │  ← 胶卷包装盒图片
│                         │
│  Kodak Gold 200         │  ← 品类名称
│  #Roll-2024-001         │  ← 胶卷编号
│                         │
│  ⏱️ 2024-01-15 至       │  ← 生命周期时间段
│  2024-01-30             │
│                         │
│  📸 36/36 张照片        │  ← 照片数量
│                         │
│  [状态进度条]            │  ← 生命周期进度
│  ▓▓▓▓▓▓░░░░ 80%         │
│                         │
│  🎬 已完成               │  ← 当前状态
│  📷 Canon AE-1          │  ← 使用的相机
│  🏷️ 标签: 旅行, 风光    │  ← 标签
└─────────────────────────┘
```

### 4.2 卡片交互

- **点击卡片：** 打开胶卷详情页或胶片条查看器
- **悬停：** 显示胶卷预览（第一张/最后一张照片的缩略图）
- **右键菜单：** 编辑、删除、归档等操作

---

## 五、胶卷详情页设计

### 5.1 页面结构

```
┌─────────────────────────────────────────────┐
│  返回按钮  │  胶卷标题  │  操作菜单(...)    │
├─────────────────────────────────────────────┤
│                                              │
│  [胶卷品类大图]                              │
│                                              │
│  ┌──────────────────────────────────────┐  │
│  │ 生命周期进度条（可点击查看详情）       │  │
│  └──────────────────────────────────────┘  │
│                                              │
│  基本信息卡片：                               │
│  - 品类：Kodak Gold 200                      │
│  - 编号：#Roll-2024-001                      │
│  - 相机：Canon AE-1                          │
│  - 冲洗方式：C-41彩色负片冲洗                │
│  - 扫描仪：Epson V600                        │
│  - 地点：北京、上海、杭州                     │
│  - 标签：旅行、风光、街拍                     │
│                                              │
│  ┌──────────────────────────────────────┐  │
│  │ 照片网格（36张照片）                   │  │
│  │ [1] [2] [3] ... [36]                 │  │
│  └──────────────────────────────────────┘  │
│                                              │
│  时间线详情：                                 │
│  📦 拆包：2024-01-15                         │
│  📷 装卷：2024-01-15                         │
│  📸 拍摄：2024-01-15 ~ 2024-01-30            │
│  🧪 冲洗：2024-02-05                         │
│  📷 扫描：2024-02-10                         │
│  ✅ 完成：2024-02-10                         │
└─────────────────────────────────────────────┘
```

### 5.2 照片展示方式

#### 方式A：胶片条风格（已有FilmStripViewer）
- 模拟真实胶片条的横向滚动展示
- 可以展开/收起
- 支持点击查看大图

#### 方式B：网格照片墙
- 标准网格布局
- 缩略图预览
- 点击进入照片详情

#### 方式C：混合模式
- 默认显示胶片条风格
- 可切换为网格视图
- 支持筛选：按地点、按日期、按评分等

---

## 六、筛选与搜索功能

### 6.1 筛选器

- **状态筛选：** 全部 / 未启封 / 拍摄中 / 已完成 / 已归档
- **品类筛选：** 全部品牌 / Kodak / Fujifilm / ILFORD / 其他
- **时间筛选：** 全部时间 / 今年 / 去年 / 自定义时间范围
- **相机筛选：** 全部相机 / 按相机品牌或型号
- **标签筛选：** 全部标签 / 旅行 / 人像 / 风光 / 街拍等

### 6.2 搜索功能

- **文本搜索：** 胶卷编号、胶卷名称、备注
- **智能搜索：** "2024年1月的Kodak胶卷"

### 6.3 排序功能

- 按时间排序：最近在前 / 最早在前
- 按照片数量：多照片在前 / 少照片在前
- 按状态：已完成在前 / 拍摄中在前

---

## 七、视图模式切换

### 7.1 网格视图（Grid View）
- 标准卡片网格布局
- 适合浏览大量胶卷

### 7.2 时间轴视图（Timeline View）
- 纵向时间轴 + 胶卷卡片
- 强调时间维度

### 7.3 列表视图（List View）
- 紧凑的列表布局
- 显示更多信息

### 7.4 日历视图（Calendar View）
- 结合热力图的日历
- 按日期查看胶卷

---

## 八、胶卷统计信息

在页面顶部或侧边栏显示：

```
📊 胶卷统计
━━━━━━━━━━━━━━━━━━━━━━━━
总胶卷数：245 卷
未启封：15 卷
拍摄中：3 卷
已完成：227 卷

最常用的品类：
1. Kodak Gold 200 (45卷)
2. Fujifilm Superia 400 (32卷)
3. Kodak PORTRA 160 (28卷)

今年已拍摄：12 卷
本月已拍摄：2 卷
```

---

## 九、推荐实现优先级

### Phase 1：核心功能（必须）
1. ✅ 统一胶卷生命周期状态体系
2. ✅ 时间轴展示（纵向）
3. ✅ 胶卷卡片（包含基本信息）
4. ✅ 胶卷详情页（生命周期 + 照片）

### Phase 2：增强功能（重要）
5. 生命周期进度条可视化
6. 筛选与搜索功能
7. 视图模式切换（网格/时间轴/列表）
8. 统计信息展示

### Phase 3：高级功能（可选）
9. 日历视图
10. 热力图集成
11. 批量操作（归档、删除等）
12. 导出功能（打印、PDF等）

---

## 十、技术实现建议

### 10.1 状态管理
- 在数据库层面统一状态值（建议使用英文，前端显示中文）
- 添加状态迁移验证（防止非法状态转换）

### 10.2 时间轴渲染
- 使用虚拟滚动优化性能（大量胶卷时）
- 按需加载历史数据

### 10.3 照片加载
- 使用懒加载和缩略图
- 支持渐进式加载（先加载前几张）

### 10.4 响应式设计
- 移动端：堆叠布局，简化时间轴
- 桌面端：充分利用横向空间

---

## 十一、参考案例

1. **VSCO Cam**：胶卷风格的UI设计
2. **VSCO Web**：时间轴浏览照片
3. **Lightroom**：文件夹/集合管理
4. **Instagram Archive**：按时间归档
5. **GitHub Contribution Graph**：热力图+时间轴

---

## 十二、下一步行动

1. **确认需求：** 与用户确认设计方案，特别是生命周期状态定义
2. **数据库调整：** 统一状态字段，添加必要的时间字段
3. **API设计：** 设计胶卷相关的API接口（按时间筛选、按状态筛选等）
4. **UI原型：** 创建关键页面的UI原型
5. **分阶段开发：** 按优先级分阶段实现

---

## 附录：数据模型补充建议

```sql
-- 建议的胶卷表字段补充
ALTER TABLE film_rolls ADD COLUMN loaded_date TEXT;        -- 装卷日期
ALTER TABLE film_rolls ADD COLUMN scanned_date TEXT;       -- 扫描完成日期
ALTER TABLE film_rolls ADD COLUMN archived_date TEXT;      -- 归档日期

-- 状态标准化（建议将中文状态迁移到英文）
UPDATE film_rolls SET status = 'unopened' WHERE status = '未启封';
UPDATE film_rolls SET status = 'completed' WHERE status = '已完成';
-- ... 其他状态映射

-- 添加状态检查约束
ALTER TABLE film_rolls ADD CHECK (status IN (
  'unopened', 'opened', 'loaded', 'shooting', 
  'exposed', 'developing', 'developed', 
  'scanning', 'completed', 'archived'
));
```


